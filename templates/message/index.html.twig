{% extends 'base.html.twig' %}

{% block title %}Messagerie{% endblock %}

{% block content %}
    <style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    </style>

    <div class="message-user">
        <h1 class="message-title">Messagerie personnelle</h1>
    <div>
    
        {% for message in messages %}
            
            {% if message.user == app.user %}
                <div class="talk-bubble tri-right round btm-right">
                    <div class="message-content">
                        <a href="{{ path ('showmessage', {'title': message.title }) }}">
                            <div>
                                <p>{{message.title}}</p>
                            </div>
                        </a>
                        <p class="message-author">Message envoyé le {{message.createdAt|date("m/d/Y")}} </p>
                     </div>
                </div>
            {% elseif message.userReceiver == app.user %}
            
                <div class="talk-bubble tri-right round btm-left">
                    <div class="message-content">
                        <a href="{{ path ('showmessage', {'title': message.title })}}">
                            <div>
                                <p>{{message.title}}</p> 
                            </div>
                        </a>
                        <p class="message-author">Message envoyé par {{message.user}} le {{message.createdAt|date("m/d/Y")}}</p>
                    </div>
                </div>
            {% endif %}
        {% endfor %}

        <a class="btn btn-primary d-flex justify-content-center" href="{{path ('newmessage') }} ">Nouveau message</a>

    </div>
    </div>

    <a class="btn btn-primary" href="{{path('ad_post') }}">Retour à la page d'accueil</a>

    {% endblock %}